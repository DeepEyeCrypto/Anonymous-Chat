# Changelog

All notable changes to the **Phantom Net** project will be documented in this file.

## [1.4.0] - 2026-02-19

### Added

- **Unit test suite**: `NetworkStatusTest` and `ChatViewModelTest` with JUnit4 + kotlinx-coroutines-test.
- **QA strategy document**: `docs/TESTSPRITE_STAGE_PLAN.md` covering L0â€“L4 test layers and coverage matrix.
- **CryptoEngine interface**: Extracted testable abstraction from `ChatViewModel` for encrypt/decrypt operations.
- **Test dependencies**: Added JUnit 4.13.2, kotlinx-coroutines-test, and core-testing to `build.gradle.kts`.

### Fixed

- Prevented Android app launch crashes caused by missing native `.so` libraries during startup.
- Hardened `PhantomApp` initialization to load native libraries individually and only start Tor/DHT/Mesh when their corresponding library is available.
- Added graceful fallback statuses (`Unavailable: native lib missing`) and broader startup error handling so missing native dependencies no longer crash the app.
- `ChatViewModel` now rejects blank messages and handles encryption/decryption failures with system messages instead of crashing.
- Removed unused imports (`rand::Rng` in `phantom-dcnet`, `zeroize::Zeroize` in `phantom-sharding`).
- Removed unnecessary `mut` bindings in `phantom-sharding` Lagrange interpolation.
- Fixed CI Gradle `cache-enabled` warning by using the correct `cache-disabled` input.

### Changed

- `ChatViewModel` constructor now accepts injectable `CryptoEngine` and `echoDelayMs` for testability.
- Android app version bumped to `1.4.0` (versionCode 2).

## [0.1.0] - 2026-02-17

### Initial Features

- **Signal Protocol FFI**: Initial implementation of E2EE using Rust and JNI.
- **Kademlia DHT**: Multi-hop peer discovery system for zero-server operation.
- **Tor Integration**: Anonymous routing using the Arti (Rust) client.
- **Mesh Networking**: Bluetooth LE discovery layer (stubbed for MVP).
- **Android UI**: Core screens (Home, Chat, Settings) built with Jetpack Compose.

### Bug Fixes

- Resolved build errors in `kademlia-dht` related to `libp2p 0.53` API changes.
- Fixed `tor-client` build issues with `arti-client` configuration.
- Unified global state management using thread-safe `OnceLock` across all Rust crates.
- Cleaned up native bridge (JNI) to avoid memory safety issues and Undefined Behavior.

### Initial Changes

- Standardized Android project versioning to `0.1.0`.
- Optimised native build script for multiple Android ABIs.

---

<!-- Generated by Phantom Net Release System -->
